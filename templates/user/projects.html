{% extends "base.html" %}

{% block content %}
<html>
<head>
    <title>Projects</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .project {
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
            padding: 10px;
        }
        h1 {
            text-align: center;
        }
        .project-header {
            font-size: 18px;
            margin-bottom: 10px;
        }
        ul {
            list-style: none;
            padding: 0;
        }
        ul li {
            margin: 5px 0;
        }
        .crud-buttons {
            display: flex;
            gap: 10px;
        }
        .crud-buttons a {
            text-decoration: none;
            color: white;
            background-color: #007bff;
            padding: 5px 10px;
            border-radius: 3px;
        }
        .crud-buttons a.disabled {
            background-color: #ccc;
        }
    </style>
</head>
<body>
    <h1>My Projects</h1>

    {% for project in projects %}
        <div class="project">
            <div class="project-header">
                <strong>[{{ project.id }}] {{ project.title }}</strong> ({{ project.start_date }} - {{ project.end_date|default:"Ongoing" }})
            </div>
            <p><strong>Manager:</strong> {{ project.manager }}</p>
            <p><strong>Client:</strong> {{ project.client.company }}</p>

            <h4>Employees:</h4>
            <ul>
                {% for employee in project.employees.all %}
                    <li>{{ employee.name }} {{ employee.surname }} - {{ employee.position }}</li>
                {% empty %}
                    <li>No employees assigned.</li>
                {% endfor %}
            </ul>

            <h4>Job:</h4>
            <ul>
                {% if project.jobs %}
                    <li>{{ project.jobs.title }}: {{ project.jobs.notes|default:"No notes" }}</li>
                {% else %}
                    <li>No job assigned.</li>
                {% endif %}
            </ul>

            <h4>Bill:</h4>
            <ul>
                {% if project.bills %}
                    <li>Issued: {{ project.bills.date_of_issue }} | Cost: {{ project.bills.cost }} EUR</li>
                {% else %}
                    <li>No bills issued.</li>
                {% endif %}
            </ul>

            <div class="crud-buttons">
                <a href="#" class="disabled">Edit</a>
                <a href="#" class="disabled">Delete</a>
                <a href="#" class="disabled">View</a>
            </div>
        </div>
    {% empty %}
        <p>No projects found.</p>
    {% endfor %}
</body>
</html>
{% endblock %}

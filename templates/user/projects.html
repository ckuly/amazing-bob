{% extends "base.html" %}

<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <title>{% block title %}User Projects{% endblock %}</title>
</head>
{% block content %}
<html>
<body>
    <h1>My Projects</h1>

    {% for project in projects %}
        <div class="project">
            <div class="project-header">
                <strong>[{{ project.id }}] {{ project.title }}</strong> ({{ project.start_date }} - {{ project.end_date|default:"Ongoing" }})
            </div>
            <p><strong>Manager:</strong> {{ project.manager }}</p>
            <p><strong>Client:</strong> {{ project.client.company }}</p>

            <h4>Employees:</h4>
            <ul>
                {% for employee in project.employees.all %}
                    <li>{{ employee.name }} {{ employee.surname }} - {{ employee.position }}</li>
                {% empty %}
                    <li>No employees assigned.</li>
                {% endfor %}
            </ul>

            <h4>Job:</h4>
            <ul>
                {% if project.jobs %}
                    <li>{{ project.jobs.title }}: {{ project.jobs.notes|default:"No notes" }}</li>
                {% else %}
                    <li>No job assigned.</li>
                {% endif %}
            </ul>

            <h4>Bill:</h4>
            <ul>
                {% if project.bills %}
                    <li>Issued: {{ project.bills.date_of_issue }} | Cost: {{ project.bills.cost }} EUR</li>
                {% else %}
                    <li>No bills issued.</li>
                {% endif %}
            </ul>

            <div class="crud-buttons">
                <a href="#" class="disabled">Edit</a>
                <a href="#" class="disabled">Delete</a>
                <a href="#" class="disabled">View</a>
            </div>
        </div>
    {% empty %}
        <p>No projects found.</p>
    {% endfor %}
</body>
</html>
{% endblock %}
